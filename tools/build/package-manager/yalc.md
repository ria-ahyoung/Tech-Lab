# Yalc를 활용한 로컬 패키지 공유

Yalc는 일종의 패키지 매니저 도구로서, 개발 환경에서 로컬 레포지터리에 패키지를 공유하고 테스트하는 데 사용된다.

로컬에서 개발한 패키지를 로컬 환경 전반에 걸쳐 공유하기 위한 단순한 로컬 저장소 역할을 수행하며,

주로 로컬 개발 환경에서 패키지 관리 및 테스트 목적으로 프로젝트 간에 로컬로 패키지를 공유하고 테스트할 수 있도록 도와준다.

## 사용 이점

Yalc를 사용하면 프로젝트 간의 협업 및 개발 프로세스를 단순화하고 개선할 수 있다.

특히 모놀리식 프로젝트가 아닌, 여러 개의 마이크로서비스 또는 모노레포 프로젝트에서 패키지 및 의존성 관리를 간편하게 만드는 데 도움이 된다.

원격 레지스트리에 패키지를 게시하지 않고 로컬 환경에서 다른 프로젝트에서 작업 중인 최신 버전을 실시간으로 사용해야 할 때 yalc를 사용할 수 있다.


### 기능

- 로컬 개발 및 테스트: 

Yalc를 사용하면 프로젝트 간에 로컬에서 패키지를 공유하고 수정할 수 있다.

개발 중인 여러 프로젝트 간의 의존성을 관리하고 공유할 수 있기 때문에 여러 프로젝트 간의 개발 중 모듈의 특정 버전(코드 변경 사항)을 효과적으로 테스트하고 디버깅이 가능하다.

 
- 실시간 업데이트: 

패키지를 로컬에서 수정하면 연결된 프로젝트에서 해당 패키지의 변경 사항이 실시간으로 반영됩니다. 이는 패키지 수정과 관련된 작업을 빠르게 반영할 수 있게 해준다.

- 중앙 레지스트리 없이 사용: 

Yalc를 사용하면 중앙 패키지 레지스트리(예: npm 레지스트리)에 의존하지 않고 로컬로 패키지를 공유할 수 있으므로, 인터넷 연결이 필요하지 않습니다.

- 버전 관리: 

Yalc는 버전 관리 및 의존성 관리를 지원합니다. 프로젝트가 어떤 버전의 패키지를 사용하는지를 명확하게 관리할 수 있습니다.

### 테스트 방법

1. Yalc를 전역으로 설치한다.

```shell
pnpm i yalc -g
```

2. 실시간 라이브러리 제공을 당담하는 레포측은 `watch 모드 build 실행` 및 `yalc publish` 자동화 명령어를 설정하고 실행한다.

```shell
pnpm run build --watch --push
```

- 서비스 프로젝트에서는 yalc에 publish된 패키지를 설치합니다. (최초 1회 필요 작업)
```shell
yalc add @package-test

pnpm install
```

- yalc를 통해 설치된 모듈은 이후 원본 코드가 수정될 때 실시간으로 로컬 build 및 publish 과정을 거쳐 모듈을 사용하는 서비스측에 최신 배포 버전을 전파하게 된다.

- 개발 테스트가 종료된 패키지는 설치 제거 명령어를 실행한다.

```shell
yalc remove @kep/kc-ui

pnpm install
```

### Reference

- [Yalc Github](https://github.com/wclr/yalc)